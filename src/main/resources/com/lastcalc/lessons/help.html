<html>
<body>
  Choose a section:
  <ul id="menu">
  </ul>
  <div class="section">
    <h1>Getting Started</h1>
    <div class="lesson">
      <h2>What is LastCalc?</h2>
      <img style="float: right;" src="/images/homework-cartoon.gif"
        height="100px" width="100px" /> LastCalc is a powerful but easy
      to use web-based calculator. Think of the lastCalc page like a
      notepad for calculations, you start on the top line and work your
      way down. The good news is that, unlike with a notepad and pencil,
      LastCalc does the hard work of figuring out the answers for you!
      <p />
      Another great thing about LastCalc is that you can go back and
      edit previous lines just by clicking on them.
      <h2>Simple math</h2>
      LastCalc lets you do basic math, note that <b>*</b> means multiply
      and <b>/</b> means divide, for example:
      <div class="question">18/2+4*2</div>
      You type the part of the question before the
      <div class="equals">=</div>
      , and when you hit return the answer will appear after it.
    </div>
    <div class="lesson">
      <h2>Parentheses</h2>
      LastCalc will multiply and divide numbers before it adds or
      subtracts them, but you can force it to calculate part of an
      answer first by putting it in parentheses:<br />
      <div class="question">18/(2+4)* 2</div>
    </div>
    <div class="lesson">
      <h2>Conversions</h2>
      LastCalc understands lots of ways to measure things, weights,
      distances, durations, and so on. LastCalc will let you convert
      between different units, some examples:
      <div class="question">3 weeks in days</div>
      <div class="question">15 km in miles</div>
      Or even currency conversions (conversion rates updated hourly from
      <a href="http://openexchangerates.org/">openexchangerates.org</a>):
      <div class="question">$23 in euros</div>
    </div>
  </div>
  <div class="section">
    <h1>Variables and Functions</h1>
    <div class="lesson">
      <h2>Assigning a result to a variable</h2>
      What if you would like to use the result of one calculation in a
      later calculation? LastCalc lets you do this:
      <div class="question">homeValue = $80000 + 10%</div>
      Note how "homeValue" is now colored to indicate that it is a
      "variable". This means that wherever LastCalc sees "homeValue", it
      will replace it with the outcome of this calculation. So now, we
      can calculate:
      <div class="question">homeValue + $2000</div>
      You can define as many variables as you like!
    </div>
    <div class="lesson">
      <h2>Editing a previous line</h2>
      What if you assign a result to a variable, and do some subsequent
      calculations with it, but then you want to edit the first line
      so that a different result is assigned to that variable?  No problem!
      Just go back, edit it, and all subsequent lines will be updated
      immediately, just like with a spreadsheet.
    </div>
    <div class="lesson">
      <h2>Functions</h2>
      What if you find yourself doing the same calculation over and over
      again? Wouldn't it be nice if LastCalc could learn to do that
      calculation for you? It can! Imagine that you are a fitness
      trainer and you frequently need to calculate someone's "body mass
      index", which is based on their weight and their height. For
      example, if your weight in kilograms is 90, and your height in
      meters is 1.8, your BMI is calculated as follows:
      <div class="question">90 / (1.8 * 1.8)</div>
      So how do we teach LastCalc how to do this for us? It's easy:
      <div class="question">bmi Height Weight = Weight / (Height *
        Height)</div>
      Let's take a closer look at this. Defining a function is similar
      to assigning a result to a variable, except for the <span
        class="highlighted variable white"> Height</span> and <span
        class="highlighted variable white"> Weight</span> - what are
      those? <br /> We call these <b>parameters</b>, think of them as
      placeholders, into which LastCalc can slot any value (we call this
      "binding"). When you are defining a function, any word beginning
      with a Capital Letter will become a parameter. It is important to
      remember that we can choose any names we want for parameters,
      LastCalc doesn't care but it may help us remember what is what. So
      we could write:
      <div class="question">bmi X Y = Y / (X * X)</div>
      This will do the <i>exact same thing</i>, but it is less clear
      what it is doing.
      <p />
      Just don't forget that <b>parameters must begin with a capital
        letter.</b>
      <p />
      So now, let's try using our new BMI calculator to do the same
      calculation we did before:
      <div class="question">bmi 1.8 90</div>
      Yay, as we would expect we got the same result as before, but now
      it is much easier to calculate someone's BMI. In this case, the <span
        class="highlighted variable white"> Height</span> parameter was
      "bound" to 1.8, and the <span class="highlighted variable white">
        Weight</span> parameter was "bound" to 90.
    </div>
    <div class="lesson">
      <h2>An observation</h2>
      You may have noticed that assigning a value to a variable is quite
      similar to creating a function. In actual fact, a variable is just
      a special type of function that consists of a single word and has
      no parameters. So from LastCalc's perspective, a variable
      assignment is just a boring type of function.
    </div>
  </div>
  <div class="section">
    <h1>Simple Lists</h1>
    <div class="lesson">
      <h2>Creating a list and retrieving items</h2>
      People frequently deal with lists of things, and so LastCalc lets
      you have lists of things too, and manipulate those lists. Let's
      create a list of distances and assign them to a variable:
      <div class="question">trips = [2, 30, 200]</div>
      We can retrieve items from the list:
      <div class="question">get 2nd from trips</div>
      This does the same thing:
      <div class="question">get 1 from trips</div>
      "Huh?" I hear you say? Why does "get 1" retrieve the second item
      from the list? The reason is that lists are "indexed" starting at
      0, so to get the first item you use "get 0 from ...". But, if you
      use 1st, 2nd, 3rd, etc then it takes care of this for you.
      <p />
      You can see the trick here:
      <div class="question">3rd</div>
      Clever eh? 3rd becomes 2 because that is what will get us the 3rd
      item in the list. I hope that's not too confusing.
    </div>
    <div class="lesson">
      <h2>Math with lists</h2>
      Getting things from lists isn't too exciting, but you can do math
      with them too:
      <div class="question">sum of trips</div>
      <div class="question">size of trips</div>
      <div class="question">average of trips</div>
      And something a little more ambitious:
      <div class="question">average of [2 miles, 3000 meters, 5
        km]</div>
      Neat eh? We can use units in list calculations.
    </div>
  </div>

  <div class="section">
    <h1>Basic Programming</h1>
    <div class="lesson">
      <h2>Pattern Matching</h2>
      Here we're going to talk about one of the lowest-level features in
      LastCalc. This can be used as a building-block for many of the
      features described in the previous section. If you find this
      confusing please don't worry - you don't need to understand this
      to use 99% of LastCalc's functionality. <br /> Consider this:
      <div class="question">first in [First ... Rest] = First</div>
      <div class="question">first in [5,4,3,2]</div>
      (Don't forget that <span class="highlighted variable white">Parameters</span>
      in functions <b>must</b> be Capitalized!).
      <p />
      What happened here? This new structure to the left of the = in the
      function definition binds to a list, and more specifically it
      binds the parameter <span class="highlighted variable white">First</span>
      to the first item in the list, and the parameter <span
        class="highlighted variable white">Rest</span> to the remaining
      items in the list. Remember, the names "First" and "Rest" are
      unimportant, I could just as easily have called them "X" and "Y".
      We don't use <span class="highlighted variable white">Rest</span>
      at all, but <span class="highlighted variable white">First</span>
      is returned from our newly defined function. <br /> You can also
      bind to more than just the first item in a list, here we define a
      function that takes a list and returns the sum of its first two
      items (which we assume are numbers):
      <div class="question">addFirstTwo [ANum, BNum ... R] =
        ANum+BNum</div>
      <div class="question">addFirstTwo [1,2,3,4,5]</div>
      And lastly, let's define a similar function that strips off the
      first two elements:
      <div class="question">stripFirstTwo [ANum, BNum ... R] = R</div>
      <div class="question">stripFirstTwo [1,2,3,4,5]</div>
      One last thing: for the addFirstTwo or the stripFirstTwo functions
      to work, the list must contain at least two items. If they don't
      the function won't have any effect:
      <div class="question">stripFirstTwo [1]</div>
      This is actually quite useful as it allows us to define multiple
      versions of a function to deal with different situations. We'll
      use this in the next section.
    </div>
    <div class="lesson">
      <h2>Booleans and Conditions</h2>
      LastCalc understands boolean operations:
      <div class="question">true and true</div>
      <div class="question">false or (true xor false)</div>
      <div class="question">not true</div>
      It also understands comparisons:
      <div class="question">3 == 3</div>
      <div class="question">3 != 4</div>
      <div class="question">3 < 4</div>
      And you can use the outcome of a boolean operation to make
      decisions:
      <div class="question">if 3 != 4 then 15 else 17</div>
      <div class="question">if 3 == 4 then 15 else 17</div>
      Now let's use this in a function, reusing the BMI function we
      defined earlier:
      <div class="question">newbmi H W = if (bmi H W > 20) then
        overweight else ok</div>
      (Don't forget that <span class="highlighted variable white">Parameters</span>
      in functions <b>must</b> be Capitalized!).
      <div class="question">newbmi 2 70</div>
      <div class="question">newbmi 2 90</div>
    </div>
  </div>
  <div class="section">
    <h1>Programming with Lists</h1>
    <div class="lesson">
      <h2>Applying a function to the elements of a list</h2>
      Imagine you wanted to double every number in a list, how would you
      do that? You might hope that we had created a convenient "double
      list" function, but then we'd spend all of our time writing
      functions to cover every conceivable circumstance. Fortunately for
      you (and our fingers!) LastCalc provides a much more flexible
      solution to this problem. Check this out:
      <div class="question">apply (Num=Num*2) to [1,2,3,4,5]</div>
      Woah, how did that happen? We created a function that takes a
      number and doubles it, and then we apply it to every number in the
      list. Note that this function is <i>private</i> to this line, it
      can't be used anywhere else. Programmers call this a "first-class
      function", but you can call it "coolness" ;-)
      <p />
      This can be a bit confusing, so let's try another one - we're
      going to convert a bunch of distances to miles:
      <div class="question">apply (Distance = Distance in miles)
        to [30000 feet, 2 km]</div>
      Ok, one more, we're going to convert a list of lists to a list
      containing the sizes of each sub-list:
      <div class="question">apply (List = size of List) to [[1],
        [1, 1], [1]]</div>
      (Don't forget that <span class="highlighted variable white">Parameters</span>
      in functions <b>must</b> be Capitalized!).
    </div>
    <div class="lesson">
      <h2>Using a function to filter a list</h2>
      What if you wanted to filter out particular elements in a list?
      You can do this in a similar way to applying a function as
      described in the previous lesson. Here we filter out any element
      in a list below 2:
      <div class="question">filter [1,2,3,4] with (X = X>2)</div>
    </div>
    <div class="lesson">
      <h2>"Folding" a function across a list</h2>
      This is a trickier one, although it will be familiar to fans of
      functional programming. You now know how to apply a function to a
      list, and how to filter a function with a list, but both of these
      look at each item in the list separately, what if we want to
      combine them in some way?
      <p />
      For example, what if you wanted to multiply all of the numbers in
      a list together? Here's how to do it:
      <div class="question">product of List = fold (P E=P*E) over
        List with 1</div>
      <div class="question">product of [1,2,3,4,5]</div>
      So what is going on here? The <b>fold</b> function requires a
      function that takes two parameters. The first parameter <span
        class="highlighted variable white">P</span> is bound to the
      output of the same function being applied to the previous element
      of the list, or if it's the first element, it's given the value
      after the <b>with</b>, in this case 1.
      <p />
      The second parameter <span class="highlighted variable white">E</span>
      is bound to the next element in the list.
      <p />
      Hopefully you can now see what is going on, <span
        class="highlighted variable white">P</span> maintains the
      running product as we cycle through all the elements in the list,
      multiplying each one by <span class="highlighted variable white">E</span>
      to produce the next product, and the value produced by the
      function being applied to the last element is the result of the <b>fold</b>
      function.
      <p />
      Here is one last example, this is actually how the "size of"
      function is written within LastCalc:
      <div class="question">size of List = fold (X Y=X+1) over
        List with 0</div>
    </div>
  </div>
  <div class="section">
      <h1>Maps</h1>
    <div class="lesson">
        <h2>Basics</h2>
        Lists are very useful, but they can't do everything, they only allow you to
        look up items based on their position in the list. Maps let you store items
        and look them up by anything you want. In this simple example we want
        to store 3 friend's phone numbers so that we can look them up based on our
        friend's name:
        <div class="question">phoneBook = {"joe" : 5552727, "fred" : 5558764, "bill" : 5552319}</div>
        And now let's look up Fred's number:
        <div class="question">get "fred" from phoneBook</div>
    </div>
    <div class="lesson">
        <h2>Pattern Matching</h2>
        As with lists, Maps can also be used in function definitions using pattern matching, here
        we define a function that retrieves Fred's number:
        <div class="question">fredNumber {"fred" : X ... Rest} = X</div>
        <div class="question">fredNumber phoneBook</div>
    </div>
  </div>

  <div class="section">
      <h1>Advanced Programming</h1>

      <div class="lesson">
      <h2>Recursion</h2>
      How do we put pattern matching on lists to use? To do this we must
      rely on a concept called "recursion", which basically means a
      function that refers to itself. The old programmer joke is that
      the definition of <i>"recursion"</i> is <i>"see recursion"</i>. <br />
      <i>This can be a tricky subject so don't worry if you don't
        get it, you don't need it for 99% of what you can do with
        LastCalc.</i> <br /> Let's say we want a function to double every
      number in a list, and you had to write it without using the apply
      ... to ... function we talked about previously. <br /> Firstly,
      what would such a function return if given an empty list?
      Obviously if there is nothing in the list to double, then it
      should just return an empty list:
      <div class="question">double [] = []</div>
      Here we're using a variation of the list pattern matching that we
      haven't seen before, [] will only ever bind to an empty list. In
      the terminology of recursion, this is our "base case". <br /> So
      great, we can now double every number in an empty list - not very
      useful. Here is how we define a function to double every item in a
      non-empty list:
      <div class="question">double [F ... R] = [F*2 ... double R]</div>
      <img style="float: right; padding: 10;"
        src="/images/mind-blown.jpg" width="150" height="200"
        height="100px" width="100px" /> What's going on here? We take a
      list and break it into <span class="highlighted variable white">F</span>,
      the first item, and <span class="highlighted variable white">R</span>,
      the remaining items. Then on the right of the = we create a new
      list, with first element <span class="highlighted variable white">F</span>*2,
      and the rest of the elements are then doubled <b>using this
        very function</b>! This is the essence of recursion. <br /> You
      might then ask - "If this function calls itself, won't it keep
      going forever"? Fortunately not, because every time it is called
      it is with a shorter version of the list, until eventually it is
      called with an empty list, and our "base case" takes care of it.
      Let's try it out:
      <div class="question">double [1,2,3]</div>
      <b>Important note: </b> While recursion is very flexible, and can
      be used to do something similar to the <b>apply</b>, <b>filter</b>,
      and the <b>fold</b> functions mentioned previously, it isn't very
      efficient. It is much better to use one of these other list
      manipulation functions if possible.
    </div>
<!--
    <div class="lesson">
      <h2>Pulling data from the web</h2>
      The Internet is full of data, but often it isn't in a very
      convenient format - and of course the <b>most</b> convenient
      format would be as a value you could calculate with in LastCalc!
      <p />
      Well, fortunately LastCalc allows you to pull data from almost any
      webpage into LastCalc, and use it in subsequent calculations!
      <p />
      We will demonstrate how you can grab the current <a
        target="_blank" href="http://bitcoin.org/">Bitcoin</a> to US
      Dollar exchange rate from a website, and then use it to teach
      LastCalc how to convert from Bitcoins to and from various other
      currencies.
      <p />
      The first stage is to find a webpage that contains the data we
      need, <a target="_blank" href="http://bitcoincharts.com/">bitcoincharts.com</a>
      will do nicely, so let's grab it and store the result in a
      variable:

     <div class="question">page = retrieve "http://"</div>

      Note that LastCalc doesn't display the entire retrieved page
      because it would be way too big. Next, we need to isolate the HTML
      elements in the page that we're interested in:
      <div class="question">elements = select "td.right" from page</div>
      We use a <a target="_blank"
        href="http://jsoup.org/cookbook/extracting-data/selector-syntax">CSS
        selector</a> to isolate specific elements in the page. Since more
      than one element matches the selector we get a list (note how
      LastCalc doesn't show the whole list because it is very long), so
      let's grab the first one:
      <div class="question">firstElement = get 1st from elements</div>
      Now let's grab the text of the element:
      <div class="question">valAsText = get text from firstElement</div>
      LastCalc is treating this text as a string, but we'd like LastCalc
      to interpret it so that it treats it as a number:
      <div class="question">bitcoinInUsd = interpret valAsText</div>
      Now we have the value of Bitcoins in US Dollars as a number! Let's
      teach LastCalc how to convert to and from Bitcoins:
      <div class="question">X Currency in btc = (((X Currency in
        usd) as number) / bitcoinInUsd) btc</div>
      (Don't forget that <span class="highlighted variable white">Parameters</span>
      in functions <b>must</b> be Capitalized!).
      <div class="question">3 euros in btc</div>
      It works! Let's teach LastCalc how to convert from Bitcoins now:
      <div class="question">X btc in Currency = ((X *
        bitcoinInUsd) usd) in Currency</div>
      <div class="question">2 btc in usd</div>
      It works too! Now LastCalc will let you calculate with almost any
      information you can find on the Internet!
    </div>
  </div>
-->
  <div class="lesson">
      <h2>Sharing your LastCalc functions</h2>
      So you've created some really useful functions and you'd like to share
      them with your friends?  Not a problem.  You can "import" pre-defined
      functions from any URL using the <b>import</b> command.  The URL must
      point to one or more function definitions in plaintext, Here is a
      very simple example:
      <a href="http://pastebin.com/raw.php?i=kgcFCpNk">http://pastebin.com/raw.php?i=kgcFCpNk</a>.
      To use these functions in your worksheet just type:
      <div class="question">import "http://pastebin.com/raw.php?i=kgcFCpNk"</div>
      And then you can use them:
      <div class="question">mouse+cat</div>
    </div>
</body>
</html>
